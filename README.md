# Задача: создать эхо бот и поместить его в контейнер

Сразу оговорюсь, что я делал всё, что связано с контейнеризацие, в ubuntu в общей папке, что бы можно было удобно редактировать на хостовой машине.

## файл main.py:

- импортрировал "os" для ряботы с переменными окружения
- импортровал "logging" для добавления логирования бота
- бота создаю с помощью бмблиотеки aiogram

В 6 строке я указал, что логирование будет происходить по адресу "./log/mylog.log". То есть в корне контейнера будет папка "log"(она создаётся при создании образа - смотри докерфайл).

В 9 строке создаю бота и передаю в него переменную окружения. Она будет передана при создании образа.

## файл Dockerfile:

- строка 1 - говорит, что образ будет собран на основе python:3.11.1
- строка 3 - рабочая директория в образе
- строка 4 - создаём инвайновую переменную (эта переменная будет применена при работе контейнера). Она нужна дял инициализации бота. Сюда нужно вставить токен бота
- строка 5 - нужна была при попытках ранее запустить бота из контенейра, но сейчас и без нее работает
- строка 6, 7 - нужны для залания времени и логирования
- строка 9 - выполняет команду при создании образа. устанавливет aiogram определённой версии. Последняя версия не подходит
- строка 10 - создаёт в рабочей директории папку "log" (в неё как раз и будет логирование)
- строка 11 - копируем все файлы с раширением "py". То есть копируется программа в образ.
- строка 13 указываются команды, которые будет выполняться при запуске контейнера. Это зпускаем пайтон и наш файл рабочий(точку входа)

## файл docker-compose.yml:

- строка 1 - версия
- строка 3 - это какие сервисы будут
- строка 5 - название сервиса
- строка 6 - из какого образа будет собран контейнер. тут можно было написать, что мы билдим образ из докерфайла нашего, но я его отдельной командой билдил ("docker build -t tgbot ./")
- строка 7 - даю название контенеру
- строка 8 - политика перезапуска контейнера (перезапуск всегда, когда контейнера упадёт)
- строка 9, 10 - указываем точку монтирования. Всё, что будет лежать в папке "log" внутри контейнера, будет дублироваться в папку "home" на хостовой машине(в той директории где лежит этот yml файл)
- строка 11 и ниже - указываем, что будет развёрнут одна копия

Папка home создаётся автоматически. 
Что бы запустить контейнер нужно сразу создать образ: docker build -t tgbot .
затем запустить контенер из образа: docker compose up

Что бы удалить всё, то сразу остановить контенер: docker compose stop, затем удалить образ и ввести команду, которая чистит зависимости и тома docker system prune --volumes
